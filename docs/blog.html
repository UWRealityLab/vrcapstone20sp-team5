<!DOCTYPE HTML>
<!--
	Spatial by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Blog - VR Capstone Team5</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body>

		<!-- Header -->
			<header id="header">
				<h1><strong><a href="index.html">VR CAPSTONE</a></strong> TEAM5</h1>
				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="blog.html">Blog</a></li>
						 <!--<li><a href="elements.html">Documents</a></li>-->
					</ul>
				</nav>
			</header>

			<a href="#menu" class="navPanelToggle"><span class="fa fa-bars"></span></a>

			<!-- Main -->
			<section id="main" class="wrapper style2">
				<div class="container">

					<header class="major special">
						<h2>Week 8 </h2>
						<p>Visual and UI System</p>
					</header>

					<header>
						<h4>What We've Accomplished</h4>
					</header>
					<p>This week we refined the game logistics, created a menu, and updated the game visual effects. </p>
					<ol>
						<li>Visual Effects: introduced particle system for ball and 
							explosion effects. Changed material for path.</li>
						<li>Added Menu and Game Summary on the Primary Wall</li>
						<li>Used the primary wall to display the menu and game summary</li>
						<li>Introduced Settings: allowed players to turn the path or mesh visuals on/off, 
							change BGM and sound effect volume, and adjust spawn rate and ball speed.</li>
						<li>Introduced Mesh Visual: added blue gradient indicator at the center of the viewp
							to indicate the furniture/wall mesh, could be turned on/off in the settings.</li>
					</ol>

					<header>
						<h4>Past Obstacles and Working Solutions</h4>
					</header>
					<p> The meshing system in the previous versions uses a black material which is claimed
						to be transparent in ML's display. However, after several tryouts, we figured that
						there's usually a black shadow on the meshing. The black color and occlution behavior
						are not ideal for our game environment. So we updated the material with a transparent 
						base with blue pattern. This way the players could see the mesh visual in the center 
						of their view to predict ball collision and could also turn off the function at their
						choice.
					</p>
					<p> The UI system also posed great obstacles to the development process. In order to develop
						the main menu, the game logistics need to be clear and modular enough. Furthermore, 
						the menu interaction is tricky as we need to combine controller behavior, raycasting, and
						custom UI elements together to trigger appropiate events. Some of the UI elements is 
						particularly harder to manipulate in such a system, such as a slider. So we chose buttons
						for most of the UI elements, even for numerical values - clicking a button will just add 
						or subtract certain value with a ceiling/floor in that case. In addition, the position of 
						the menu involves a bit of consideration too. We face several problems regarding menu 
						placement: 1) it is possible to be blocked by the mesh visual of the wall, 2) when the wall
						has decorations (such as frames, obstructive fire place, etc), the mesh may also block 
						the menu. After experiments and discussion, we made the following adjustments: 1) move the 
						UI canvas out from the wall for 10cm as MagicLeap did in their example, 2) prompt the players 
						to choose a wall with flat surface in the center, 3) make the bottons in a slightly smaller 
						but reasonable size so that the overall size of the menu/setting items is reasonable for 
						the player to find a wall with those requirements.
					</p>
						

					<header>
						<h4>Plans for next week</h4>
					</header>
					<p>Moving forward, we are planning to do the following things:</p>
					<ol>
						<li> Explore Different Game Modes</li>
						<li> Explore Powerups</li>
						<li> Considering adding different exercises (maybe make the ball bounce?)</li>
						<li> Explore Visual Indicators</li>
					</ol>

				</div>
			</section>

			<!-- Main -->
			<section id="main" class="wrapper">
				<div class="container">

					<header class="major special">
						<h2>Week 7 </h2>
						<p>Improvements based on MVP</p>
					</header>

					<header>
						<h4>What We've Accomplished</h4>
					</header>
					<p>This week we made several improvements based on the advices we received when demoing to other people,
						refined the spawning algorithm and refactored code base to prepare fot the next round of updates.</p>
					<ol>
						<li>Refine ball spawning algorithm so that:
							<ul><li>the ball does not appear outside of the playspace</li>
							<li>ball path will not be too high for player to reach</li>
						<li> ball path is less abrupt now: it wouldn't come out of the wall with a projection angle that is too small.</li>
					</ul></li>
						<li>Add a ring model to indicate the beginning and endding of a path</li>
						<li>Now the path can be a curve instead of just a straight line</li>
						<li>Add sound effect for ball spawning and despawning</li>
						<li>Refactor code base for a clean coding environment</li>
					</ol>

					<header>
						<h4>Past Obstacles and Working Solutions</h4>
					</header>
					<p> When we finished the MVP, the code is highly coupled, which is bad for future development. The score keeper
						script used for keeping track of score is referenced by other scripts a lot, and we decided to decouple it
						using the event/listener pattern to control the access to score keeper. </p>
					<p> After adding start/end ring model for the path, we discovered that sometimes when
						the start/end point of path is on the floor, it can appear out of the playspace defined.
						This is caused by the fact that floor can be an irregular polygon, so the random point
						in a rectangular range defined by minimum/maximum x/z coordinate of the floor may not be
						in the placespace. We solved this by using a function provided by Magic Leap to examine whether
						the point we have chosen is inside the region, and if not, rechoose a point. </p>
						<p>

					<header>
						<h4>Plans for next week</h4>
					</header>
					<p>Moving forward, we are planning to do the following things:</p>
					<ol>
						<li> Replace ball/trail with better model so that it is more attracting</li>
						<li> Add a menu for the game, so that we can have different game modes and custom settings.</li>
						<li> Make use of the primary wall of playspace to display informations like game summary.</li>
						<li> Use hand meshing to catch the ball.</li>
					</ol>

				</div>
			</section>

		<!-- Main -->
		<section id="main" class="wrapper style2">
			<div class="container">

				<header class="major special">
					<h2>Week 6 </h2>
					<p>MVP Released</p>
				</header>

				<a href="#" class="image fit"><img src="images/blog6banner.jpg" alt="" /></a>

				<header>
					<h4>What We've Accomplished</h4>
				</header>
				<p>This week we released the MVP and live-steamed the demo on Thursday's session.</p>

				<header>
					<h4>New Release</h4>
				</header>
				<p><a href="https://github.com/UWRealityLab/vrcapstone20sp-team5/releases/tag/v1.0.0">MVP Repository</a>
					: including the Unity project and prebuilt <a href="https://github.com/UWRealityLab/vrcapstone20sp-team5/blob/b1275075a2f5b6dc92d008d7d5c08314ca68d57f/MVP.mpk">MVP.mpk</a></p>

				<header>
					<h4>Code Update</h4>
				</header>
				<ol>
					<li>Added Playspace: <a href="https://github.com/UWRealityLab/vrcapstone20sp-team5/blob/b1275075a2f5b6dc92d008d7d5c08314ca68d57f/Assets/MagicLeap-Tools/Code/Environment/Playspace/Playspace.cs">Playspace.cs</a></a> </li>
					<li>Added furniture meshing and collision: <a href="https://github.com/UWRealityLab/vrcapstone20sp-team5/blob/b1275075a2f5b6dc92d008d7d5c08314ca68d57f/Assets/MagicLeap/Core/Assets/Prefabs/MLSpatialMapper.prefab">MLSpatialMapper.prefab</a></li>
					<li>Modified spawning algorithm: <a href="https://github.com/UWRealityLab/vrcapstone20sp-team5/blob/b1275075a2f5b6dc92d008d7d5c08314ca68d57f/Assets/Scripts/SpawnManager2.cs">SpawnManager2.cs</a></li>
					<li>Modified exercise categorizing algorithm: <a href="https://github.com/UWRealityLab/vrcapstone20sp-team5/blob/b1275075a2f5b6dc92d008d7d5c08314ca68d57f/Assets/Scripts/ScoreKeeping.cs">ScoreKeeping.cs</a></li>
				</ol>

				<header>
					<h4>Past Obstacles and Working Solutions</h4>
				</header>
				<p>Plane Extraction: The game requires detecting planes (walls/ceiling/floor) for ball to spwan or end its path.
					The orginal plan is to use the existing cached planes built-in to Magic Leap. However, in the case that ML
					 mapped the whole house/apartment, all the planes woule be activated and there is no effective way to narrow
					down the area to a reasonable range considering that players might move from where they wake up ML and each
					player's room size varies. Then we try to activly use the plane extraction functionality provided by ML at
					the beginning of each game, but the active plane extration runs into the same problems. Eventually, Playspace
					by ML seems to be the best solution, where players can define their own playing area and such an area can be
					cached for future usage.</p>

				<p>Furniture Meshing: We envisioned the ball to crash on the furnitures if not catched before that. Such effect
					requires meshing for the furnitures, but the usual practice for collisions would cause the ball to crash on
					the spawning plane or something very close by (eg. a TV hanging the spawning plane), causing players to have
					lots of frustrations as such settings make some ball almost impossible to catch. Attempts to fix the issue
					including calculating the collision point distance from wall and exculding those that are close; categorize
					the meshing with tags and condition for collision crash effect. But none of them provides a satisfying effect
					 visually or methematically. In the end, we added a timer for each ball. If a ball is spawned and collided
					 with the mesh within some threshold (eg. 2 seconds), we do not crash the ball. This current working solution
					 guarantees that no ball would collide on spawning wall or immediately after being spawned, but still allows
					 the balls to collide on furnitures in the future, reducing the player frustration overall while made the
					 visual effects possible.
				</p>

				<p>Exercise Categorizing: The original exercise categorizing system utilizes the ball location to count if a
					ball-catch is a stretch-up or squat-down. But the ball location turned out to be very misterious, thus we
					are currently using controller position instead. If the controller is sustituted in the future, other Solutions
					 are needed for this part.</p>

				<header>
					<h4>Plans beyond MVP</h4>
				</header>
				<p>Moving forward, we are planning to polish the MVP and add more features, indluding:</p>
				<ol>
					<li>Ball Spawning Algorithm: polish on ball spawning location to prevent balls from being uncatchable.</li>
					<li>Hand Meshing: explore hand meshing to replace one/both of the hand controls.</li>
					<li>Audio: add sound effects an dmusic to the scene.</li>
					<li>Ball Explosion Effects: add one more ball explosion effect to distinguish between catch and crash.</li>
					<li>Main Menu: add a main menu for player to choose between different mode and adjust settings.</li>
				</ol>

			</div>
		</section>
		<!-- Main -->
		<section id="main" class="wrapper">
			<div class="container">

				<header class="major special">
					<h2>Week 5 </h2>
					<p>Individual Tasks Finished For MVP</p>
				</header>

				<header>
					<h4>What We've Accomplished</h4>
				</header>
				<p>This week we divided tasks among the team members and finished
					 those tasks for MVP. In specific, each team member is
					 responsible for the following:</p>
				<ol>
					<li>Ryan: Meshing/Environment setup and spawning balls from walls					</li>
					<li>Ana: Setup unity with Magic Leap, ball objects interaction with walls</li>
					<li>Yuxuan: Balls flying in the room and trajectories</li>
					<li>Yating: Scoring system</li>
				</ol>

				<header>
					<h4>Demo</h4>
				</header>

				<ol>
					<li>Path/Ball Spawn and Collision Effects</li>
					<a href="#" class="demo1"><img src="images/path&collision.gif" alt="" /></a>

					<li>User Faciliating System: Score & Scan Texts</li>
					<a href="#" class="demo2"><img src="images/score&scan.gif" alt="" /></a>

					<li>User Faciliating System: Session Summary</li>
					<a href="#" class="demo3"><img src="images/summary.gif" alt="" /></a>

				</ol>


				<header>
					<h4>Code Update</h4>
				</header>
				<p>Codes for each task are uploaded into different branches of the repo</p>

				<header>
					<h4>Plans for Next Week</h4>
				</header>
				<p>Now that we have all the parts for MVP, we just need to incorporate those parts together to make a whole game.</p>


				<header>
					<h4>Help Needed and Blocked Progress</h4>
				</header>
				<p>Hardware/Software setup problems: </p>
				<ol>
					<li>Unity crash frequently on MacOS;</li>
					<li>Repo does not work for some teammates (asset missing, build failure); </li>
					<li>One teammate has difficulty connect simulator to Unity and has not received ML device yet.</li>
				</ol>

			</div>
		</section>
		<!-- Main -->
		<section id="main" class="wrapper style2">
			<div class="container">

				<header class="major special">
					<h2>Week 4 </h2>
					<p>Setting up Magic Leap, working through tutorials </p>
				</header>

				<header>
					<h4>What We've Accomplished</h4>
				</header>
				<p>This week we connected the Magic Leaps to our computers
					and started learning how to develop for the device.
					We watched a tutorial to get started.
					Learning how to develop for the magic leap before
					starting our actual app will certainly make development
					faster later on</p>

				<header>
					<h4>New Release</h4>
				</header>
				<p>No public releases this week</p>

				<header>
					<h4>Code Update</h4>
				</header>
				<p>No development of our app has begun, but we are working on a tutorial to make sure we are able to start soon</p>

				<header>
					<h4>Plans for Next Week</h4>
				</header>
				<p>The biggest goal is starting our actual app and getting a minimum version of the game working. Tasks to be finished next week:</p>
				<ol>
					<li>Game Implementation: Get wall/ceiling maps, spawn balls. </li>
					<li>Game Implementation: Show laser paths for balls.</li>
					<li>Game Implementation: Setup timer and score board.</li>
					<li>Add ball disappearing effect if the ball hits any obstacle.</li>
				</ol>

				<header>
					<h4>Help Needed and Blocked Progress</h4>
				</header>
				<p>The only block currently is that one of the team members is still waiting for the magic leap to arrive, making it harder to develop. Hopefully the device will arrive very soon </p>

			</div>
		</section>
		<section id="main" class="wrapper">
			<div class="container">

				<header class="major special">
					<h2>Week 3 </h2>
					<p>Project Pitch, PRD, Environment Setup </p>
				</header>

				<a href="#" class="image fit"><img src="images/pic02.jpg" alt="" /></a>

				<header>
					<h4>What We've Accomplished</h4>
				</header>
				<p>This week we refined the project idea in the Product Requirements Document and released
					the initial project pitch video explaining our ideas in the simple graphic/scratch form.
					The weekly milestones, evaluation metrics, and team member responsibilities are also refined
					for the next 7 weeks to ensure a smooth development cycle. Refer to the New Release section
					for more details.</p>

				<header>
					<h4>New Release</h4>
				</header>
				<p><a href="https://www.youtube.com/watch?v=bsHNA14kxhI"> Project Pitch Video </a></p>
				<p><a href="https://docs.google.com/document/d/1hQaa1UxvgqP_PKiEVQTKGUtKWgkMUgQZyht58DNJnRA/edit?usp=sharing"> Product Requirements Document</a></p>

				<header>
					<h4>Code Update</h4>
				</header>
				<p>No actual development has begun, although we anticipate to finish setting up development environment for Magic Leap this weekend!</p>

				<header>
					<h4>Ideas Update</h4>
				</header>
				<p>MVP defined: stick with ball collection and time-based mode</p>
				<ol>
					<li>Path line for balls</li>
					<li>Balls from all directions moving along the path line</li>
					<li>If ball hits any other surface other than the one it came out of, disappear into particles</li>
					<li>Balls can be caught with both hands</li>
					<li>Scoreboard: Reward 1 pt per ball catched</li>
					<li>Timer</li>
					<li>Summary: how much time spent in the game, how many squat/stretch you got</li>

				</ol>
				<p>Target product defined: visual indicator, more player control, and enjoyable environment</p>
				<ol>
					<li>Path lines can be turned on and off</li>
					<li>Ball speed can be adjusted by the user</li>
					<li>Interesting game environment</li>
					<li>Balls coming out of holes in the wall</li>
					<li>Visual indicator</li>
				</ol>
				<p>Stretch goals defined: </p>
				<ol>
					<li>Intro instructions</li>
					<li>Obstacles</li>
					<li>Powerups</li>
					<li>Survival game mode</li>
					<li>Social media, post  high scores</li>
				</ol>

				<header>
					<h4>Plans for Next Week</h4>
				</header>
				<p>The biggest goal for us moving forward is to get a simple scene up a running, and become more familiar with the magic leap development kit. Tasks to be finished next week:</p>
				<ol>
					<li>Dev Environment Setup: Setup unity with magic leap.</li>
					<li>Game Implementation: Get wall/ceiling maps, spawn balls. </li>
					<li>Game Implementation: Show laser paths for balls.</li>
				</ol>

				<header>
					<h4>Help Needed and Blocked Progress</h4>
				</header>
				<p>We currently have nothing blocking us, although we anticipate getting help from Joerg in order to help us through the initial setup and the various input modalities (gestures, control, etc.). </p>

			</div>
		</section>

		<!-- Main -->
			<section id="main" class="wrapper style2">
				<div class="container">

					<header class="major special">
						<h2>Weeks 1 + 2</h2>
						<p>Getting Started, Team and Device Setup, Project Requirements </p>
					</header>

					<a href="#" class="image fit"><img src="images/blog1banner.jpg" alt="" /></a>

					<header>
						<h4>What We've Accomplished</h4>
					</header>
					<p>This week was anticipated to be slower than others, we spent a lot of time getting familiar with the course structure, our magic leap devices, and the development kits necessary to begin developing. The biggest thing we accomplished, as expected, was deciding on our project idea. We were initially interested in designing a medical exam, but ultimately decided that our knowledge and technical expertise would limit us there. Instead, we’ve decided to design a fitness game in hopes that it can help people stay engaged and active during these unusual times.</p>
					<p>The current idea is to have users run around and collect balls falling from the sky in a timely fashion, while avoiding obstacles. It will be great exercise for the users legs, neck, and cardiovascular system as they are constantly moving, reacting, and changing directions. Depending on the difficulty of implementation, we plan to add more features or other fitness style mini-games.</p>
					<p>Beyond the actual project idea, we’ve set up a slack channel and a google drive folder which houses all our documents. Working remotely has posed to be more difficult than expected, but we will begin to utilize more virtual zoom meetings in order to stay on the same page and delegate tasks as efficiently as possible.</p>

					<header>
						<h4>Code Update</h4>
					</header>
					<p>No actual development has begun, although we anticipate to begin within
                        the next week.</p>

					<header>
						<h4>Ideas Update</h4>
					</header>
					<p>Here are the main elements we’ve begun to consider for our game:</p>
					<ol>
						<li>Different game modes and objectives: One mode could be to collect as
                            many items as possible during some time frame, another could be to collect as many items without catching a bomb.</li>
						<li>Game objects with varying properties: Some will fall and disappear
                            through the floor, while others will bounce around with different speeds and directions. Even something like the golden snitch could be a great addition.</li>
						<li>Various obstacles: We already mentioned bombs, but other things like
                            black holes, items to avoid, and terrain to traverse will both increase the difficulty and physical activity of the game.</li>
						<li>Game props: We want to have power ups or props that give the player
                            special abilities like doubling their score, slowing down time, or clearing all objects in the scene.</li>
						<li>Musical elements: Certain block types will have certain sounds, there
                            may be background music, and some sort of indicator for a new record or even winning the game.</li>
						<li>Visual effects: This will help attract the players to certain
                            objectives. For example, if an object hits the ground it could have a splash effect, or display a “-1” text.</li>
                        <li>Varying game environments: The game could either be set up on the
                            ground or in the sea. If it were to be in the sea, the items would float when they hit the water. We could even have a sports court to reinforce the fitness aspect of the game.</li>
                    </ol>

					<header>
						<h4>Plans for Next Week</h4>
					</header>
                    <p>The biggest goal for us moving forward is to get a simple scene up a running, and become more familiar with the magic leap development kit. Tasks to be finished next week:</p>
                    <ol>
                        <li>Environment setup: explore how to deploy the app to our devices or set up an emulator on our computers for debugging and testing purposes. </li>
                        <li>Mentoring & Planning: figure out who is familiar with the features we want in our game and can help us establish a clear plan for development as the four of us haven’t done much AR development up to this point. </li>
                        <li>Resource/Asset Discovery: Explore and gather some prebuilt assets (eg. scene, objects, animations, user interaction) that could be used in the game. If possible, use the assets to build a simple scene and identify the possible tech/non-tech challenges we need to solve in the future.</li>
                    </ol>

					<header>
						<h4>Help Needed and Blocked Progress</h4>
					</header>
					<p>We currently have nothing blocking us, although we anticipate getting help from Joerg in order to help us through the initial setup and the various input modalities (gestures, control, etc.). </p>

				</div>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<div class="container">
					<ul class="icons">
						<li><a href="https://github.com/UWRealityLab/vrcapstone20sp-team5" class="icon fa-github"></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; University of Washington VR Capstone SP20 Group5</li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
